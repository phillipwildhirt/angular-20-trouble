@import 'src/variables';

@mixin popover-variations() {
  &.bs-popover-top {
    > .popover-arrow {

      &::before {
        border-top-color: var(--#{$prefix}popover-arrow-border);
      }

      &::after {
        border-top-color: var(--#{$prefix}popover-bg);
      }
    }
  }

  /* rtl:begin:ignore */
  &.bs-popover-end {
    > .popover-arrow {

      &::before {
        border-right-color: var(--#{$prefix}popover-arrow-border);
      }

      &::after {
        border-right-color: var(--#{$prefix}popover-bg);
      }
    }
  }

  /* rtl:end:ignore */

  &.bs-popover-bottom {
    > .popover-arrow {

      &::before {
        border-bottom-color: var(--#{$prefix}popover-arrow-border);
      }

      &::after {
        border-bottom-color: var(--#{$prefix}popover-bg);
      }
    }

    // This will remove the popover-header's border just below the arrow
    .popover-header::before {
      border-bottom: var(--#{$prefix}popover-border-width) solid var(--#{$prefix}popover-header-bg);
    }
  }

  /* rtl:begin:ignore */
  &.bs-popover-start {
    > .popover-arrow {

      &::before {
        border-left-color: var(--#{$prefix}popover-arrow-border);
      }

      &::after {
        border-left-color: var(--#{$prefix}popover-bg);
      }
    }
  }

  /* rtl:end:ignore */

  &.bs-popover-auto {
    &[data-popper-placement^="top"] {
      @extend .bs-popover-top;
    }

    &[data-popper-placement^="right"] {
      @extend .bs-popover-end;
    }

    &[data-popper-placement^="bottom"] {
      @extend .bs-popover-bottom;
    }

    &[data-popper-placement^="left"] {
      @extend .bs-popover-start;
    }
  }

  // Offset the popover to account for the popover arrow
  &>.popover-header {
    color            : var(--#{$prefix}popover-header-color);
    background-color : var(--#{$prefix}popover-header-bg);
    border-bottom    : var(--#{$prefix}popover-border-width) solid var(--#{$prefix}popover-border-color);

    &:empty {
      display: none;
    }
  }

  &>.popover-body {
    color: var(--#{$prefix}popover-body-color);
  }
}

.popover-dark {
  &.popover {
    --#{$prefix}popover-bg           : #{$popover3-bg};
    --#{$prefix}popover-border-color : #{$popover3-bg};
    --#{$prefix}popover-header-color : #{$popover3-header-color};
    --#{$prefix}popover-header-bg    : #{$popover3-header-bg};
    --#{$prefix}popover-body-color   : #{$popover3-body-color};
    --#{$prefix}popover-arrow-border : var(--#{$prefix}popover-border-color);

    background-color : var(--#{$prefix}popover-bg);
    border           : var(--#{$prefix}popover-border-width) solid var(--#{$prefix}popover-border-color);
  }

  @include popover-variations();
}

.popover-body {
  &.popover {
    --#{$prefix}popover-bg             : #{$popover2-bg};
    --#{$prefix}popover-border-color   : #{$popover2-border-color};
    --#{$prefix}popover-header-color   : #{$popover2-header-color};
    --#{$prefix}popover-header-bg      : #{$popover2-header-bg};
    --#{$prefix}popover-body-color     : #{$popover2-body-color};
    --#{$prefix}popover-arrow-border   : #{$popover2-border-color};
    --#{$prefix}popover-border-width   : 1px;
    --#{$prefix}popover-body-padding-x : 0.25rem;
    --#{$prefix}popover-body-padding-y : 0.25rem;

    background-color : var(--#{$prefix}popover-bg);
    border           : var(--#{$prefix}popover-border-width) solid var(--#{$prefix}popover-border-color);
    padding          : $tooltip-padding-y $tooltip-padding-x;
  }

  @include popover-variations();
}

